使用方法
1. 先运行example\fileserver 这个文件服务器,这个服务器中整合了版本更新查询和文件下载功能。具体代码逻辑可以参看官网的介绍,这里就不赘述了,为了方便测试,把官网的api服务加上文件下载弄在了一起,在demo中,默认配置的是1.0.0.9的可用升级版本。

2. 打开TestWinForms.sln项目.在Load方法中会先去请求文件服务器,检查是否需要更新版本,如果需要更新,就会启动Upgrade.exe程序来更新,并且关闭winform程序,更新完后会自动重启

3.运行升级之前需要把GeneralUpdate.Upgrad程序中bin目录下面的所有文件复制到run文件夹(见下面的文件夹解释)中才能正常更新。demo中是直接引用source的源码的,后面发布了也可以引用nuget包。

4.代码里有比较详细的注释,可以试着操作一下

5.如果项目中GeneralUpdate.ClientCore,GeneralUpdate.Upgrad说找不到,直接引用src中C#模块的对应代码过来,尤其是Upgrad是必须要的,要把bin里面的复制到运行文件夹才行

直接看效果
如果想直接看效果,可以直接打开example\winform\测试包 这个文件夹,将"可用版本.zip"解压。运行文件服务器,再运行解压后的run文件夹中的TestWinForms.exe,就能先体验一下更新的过程。

文件夹解释
解压文件夹中有1,2,3 三个文件夹  1是旧版本的,2是新版本发的,3是差分版本,run文件夹是实际运行的目录(也就是准备从1版本升级到2版本的),要测试的时候运行的是run文件夹里面的。
我模拟的是从1.0.0.0版本升级到1.0.0.9版本,升级成功以后dll的版本号会变化,再次打开后就不会判断为需要升级了。
具体的可以看代码。
